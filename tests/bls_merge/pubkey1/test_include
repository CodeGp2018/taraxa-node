TESTS += tests/bls_merge/pubkey1/merge2.ok

CLEAN_TESTS += \
  tests/bls_merge/pubkey1/merge1 \
  tests/bls_merge/pubkey1/merge1.ok \
  tests/bls_merge/pubkey1/merge2 \
  tests/bls_merge/pubkey1/merge2.ok

tests/bls_merge/pubkey1/merge1.ok: $(BUILD)/bls_merge_public_keys
	@echo -n "TEST bls_merge/pubkey1 merge1... " \
  && $(BUILD)/bls_merge_public_keys --id 0000000000000000000000000000000000000000000000000000000000000001 \
    --id 0000000000000000000000000000000000000000000000000000000000000002 \
    --pubkey D66C4036ADD5215EC63140F6F1477474938EB70204CE0449535611D039FDEF209E4AF2F5855F118AF6ED97F111DFA2F271FE5A3447A1EA56C3A59E7C9FDB4F88 \
    --pubkey FC1CF270D2FA50F88722837DC1A2B8FE2D046E6437806CE2B36F08D3D5C8070FF6860EBB8040AC6187F6808BD7E01BAC1E4116033268D72DC749943F367E7420 \
    > tests/bls_merge/pubkey1/merge1 \
  && diff -u tests/bls_merge/pubkey1/merge1 tests/bls_merge/pubkey1/merge1.ref && touch $@ && echo PASS

# should get same merged pubkey as above
tests/bls_merge/pubkey1/merge2.ok: tests/bls_merge/pubkey1/merge1.ok
	@echo -n "TEST bls_merge/pubkey1 merge2... " \
  && $(BUILD)/bls_merge_public_keys --id 0000000000000000000000000000000000000000000000000000000000000002 \
    --id 0000000000000000000000000000000000000000000000000000000000000001 \
    --pubkey F64C592A7F33B99B04B25B93B39E9E61A2B452C05FA58AEBD299F3A3A534200DA3706373949B5133DD3A8D3BBD5483FA6E28077B3D83AE0ADEA08B170F2E2701 \
    --pubkey 53BB798179903A7BECCB0900AE1BADAC91AAB367413380D8F58A33D7251A0F23EE1291499ADEF5E9A36DF02BB9C9057C4B4683FDB856985F1BF2EC4FB3437D1D \
    > tests/bls_merge/pubkey1/merge2 \
  && diff -u tests/bls_merge/pubkey1/merge2 tests/bls_merge/pubkey1/merge1.ref && touch $@ && echo PASS
